<html class="scroll-smooth" lang="pt-BR">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Fúria das Ruas
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
     font-family: "Inter", sans-serif;
   }
   /* Scrollbar for sidebar */
   #cart-sidebar::-webkit-scrollbar {
     width: 8px;
   }
   #cart-sidebar::-webkit-scrollbar-track {
     background: #f1f1f1;
   }
   #cart-sidebar::-webkit-scrollbar-thumb {
     background: #888;
     border-radius: 4px;
   }
   #cart-sidebar::-webkit-scrollbar-thumb:hover {
     background: #555;
   }
   /* Banner height */
   .banner-height {
     height: 200px !important;
     max-height: 200px;
   }
   /* Horizontal scroll for products */
   #products {
     white-space: nowrap;
     overflow-x: auto;
     -webkit-overflow-scrolling: touch;
     scrollbar-width: thin;
     scrollbar-color: #9ca3af #e5e7eb;
     padding-left: 4px;
     padding-right: 4px;
     margin-top: 4px !important;
     margin-bottom: 4px !important;
   }
   #products::-webkit-scrollbar {
     height: 8px;
   }
   #products::-webkit-scrollbar-track {
     background: #e5e7eb;
   }
   #products::-webkit-scrollbar-thumb {
     background-color: #9ca3af;
     border-radius: 4px;
   }
   /* Remove horizontal padding on small screens for nav */
   nav::-webkit-scrollbar {
     height: 8px;
   }
   nav::-webkit-scrollbar-track {
     background: #e5e7eb;
   }
   nav::-webkit-scrollbar-thumb {
     background-color: #9ca3af;
     border-radius: 4px;
   }
   /* Custom minimal vertical spacing */
   header {
     padding-top: 8px !important;
     padding-bottom: 8px !important;
     margin-bottom: 6px !important;
   }
   nav {
     padding-top: 6px !important;
     padding-bottom: 6px !important;
     margin-top: 4px !important;
     margin-bottom: 6px !important;
   }
   section.banner-section {
     margin-top: 4px !important;
     margin-bottom: 6px !important;
     padding-left: 4px !important;
     padding-right: 4px !important;
   }
   section.choose-shirt {
     margin-top: 6px !important;
     margin-bottom: 6px !important;
     padding-left: 4px !important;
     padding-right: 4px !important;
   }
   #products {
     margin-top: 6px !important;
     margin-bottom: 6px !important;
   }
   article {
     margin-left: 4px !important;
     margin-right: 4px !important;
     padding-top: 4px !important;
     padding-bottom: 4px !important;
     display: inline-block;
     vertical-align: top;
   }
   footer#footer-cart {
     padding-top: 8px !important;
     padding-bottom: 8px !important;
     margin-top: 6px !important;
     position: fixed;
     bottom: 0;
     left: 0;
     right: 0;
     z-index: 40;
     background-color: #0047B3;
     display: flex;
     align-items: center;
     justify-content: space-between;
     pointer-events: auto;
   }
   /* Reduce vertical spacing inside articles */
   article h3 {
     margin-bottom: 0.25rem;
   }
   article p {
     margin-top: 0.25rem;
     margin-bottom: 0.5rem;
   }
   article button {
     margin-top: 0.5rem;
   }
   /* Sidebar cart fixed and above footer */
   #cart-sidebar {
     z-index: 50;
   }
   /* Modal styles */
   #size-modal, #checkout-modal {
     position: fixed;
     inset: 0;
     background: rgba(0,0,0,0.5);
     display: flex;
     align-items: center;
     justify-content: center;
     z-index: 60;
   }
   #size-modal.hidden, #checkout-modal.hidden {
     display: none;
   }
   .modal-content {
     background: white;
     border-radius: 0.75rem;
     padding: 1.5rem;
     max-width: 400px;
     width: 90%;
   }
   .modal-header {
     font-weight: 700;
     font-size: 1.25rem;
     margin-bottom: 1rem;
     text-align: center;
   }
   .size-option {
     border: 1px solid #9ca3af;
     border-radius: 0.375rem;
     padding: 0.5rem 0.75rem;
     font-size: 0.875rem;
     cursor: pointer;
     user-select: none;
     margin-bottom: 0.5rem;
     text-align: center;
   }
   .size-option.selected {
     background-color: #3b82f6;
     border-color: #2563eb;
     color: white;
   }
   .modal-buttons {
     display: flex;
     justify-content: flex-end;
     gap: 0.75rem;
     margin-top: 1rem;
   }
   .btn {
     padding: 0.5rem 1rem;
     border-radius: 0.375rem;
     font-weight: 700;
     cursor: pointer;
     user-select: none;
   }
   .btn-primary {
     background-color: #2563eb;
     color: white;
     border: none;
   }
   .btn-primary:disabled {
     opacity: 0.5;
     cursor: not-allowed;
   }
   .btn-secondary {
     background-color: #d1d5db;
     border: none;
   }
   /* File input styling */
   .file-input-label {
     display: block;
     margin-bottom: 0.25rem;
     font-weight: 600;
     font-size: 0.875rem;
   }
   .file-input {
     border: 1px solid #9ca3af;
     border-radius: 0.375rem;
     padding: 0.5rem;
     width: 100%;
     cursor: pointer;
   }
   /* Hide default scrollbar for nav and products on supported browsers */
   .scrollbar-hide::-webkit-scrollbar {
     display: none;
   }
   .scrollbar-hide {
     -ms-overflow-style: none;
     scrollbar-width: none;
   }
   /* Pedidos section styles */
   #orders-section {
     max-width: 5xl;
     margin: 0 auto 2rem auto;
     padding: 0 1rem;
   }
   #orders-list {
     margin-top: 1rem;
     max-height: 300px;
     overflow-y: auto;
     border: 1px solid #cbd5e1;
     border-radius: 0.75rem;
     padding: 1rem;
     background: #f9fafb;
   }
   .order-item {
     border-bottom: 1px solid #e2e8f0;
     padding-bottom: 0.75rem;
     margin-bottom: 0.75rem;
   }
   .order-item:last-child {
     border-bottom: none;
     margin-bottom: 0;
     padding-bottom: 0;
   }
   .order-header {
     font-weight: 700;
     font-size: 1rem;
     margin-bottom: 0.25rem;
     color: #1e293b;
   }
   .order-date {
     font-size: 0.75rem;
     color: #64748b;
     margin-bottom: 0.5rem;
   }
   .order-products {
     font-size: 0.875rem;
     color: #334155;
     margin-bottom: 0.5rem;
   }
   .order-total {
     font-weight: 700;
     color: #0f172a;
   }
   /* Splash animation styles */
   #add-to-cart-splash {
     position: fixed;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%) scale(0);
     background-color: rgba(0, 71, 179, 0.9);
     color: white;
     font-weight: 700;
     font-size: 1.5rem;
     padding: 1rem 2rem;
     border-radius: 1.5rem;
     z-index: 1000;
     pointer-events: none;
     opacity: 0;
     transition: opacity 0.3s ease, transform 0.3s ease;
     display: flex;
     align-items: center;
     gap: 0.5rem;
   }
   #add-to-cart-splash.show {
     opacity: 1;
     transform: translate(-50%, -50%) scale(1);
   }
  </style>
 </head>
 <body class="bg-white text-black min-h-screen flex flex-col justify-start relative overflow-x-hidden pb-16">
  <!-- Header -->
  <header class="bg-[#0047B3] flex items-center justify-between px-6 rounded-br-[2.5rem]">
   <div class="w-14 h-14 rounded-full bg-white flex items-center justify-center shrink-0 overflow-hidden">
    <img src="logo.jpg" class="w-14 h-14 object-contain rounded-full" draggable="false" height="56" width="56" alt="Logo circular branco com texto Fúria das Ruas estilizado"/>
   </div>
   <h1 class="text-white font-extrabold text-xl md:text-2xl select-none">
    FÚRIA DAS RUAS
   </h1>
   <button aria-label="Abrir carrinho de compras" class="relative shrink-0 focus:outline-none" id="cart-button" type="button">
    <i class="fas fa-shopping-cart text-green-600 text-3xl"></i>
    <span class="absolute -top-1 -right-1 bg-white text-black text-xs font-semibold rounded-full w-5 h-5 flex items-center justify-center select-none hidden" id="cart-count">
     0
    </span>
   </button>
  </header>
  <!-- Navigation -->
  <nav class="flex gap-1 px-6 overflow-x-auto scrollbar-hide">
   <a id="nav-pedidos" class="flex items-center gap-1 bg-gray-900 text-white font-bold rounded-full px-4 py-1 whitespace-nowrap shrink-0 cursor-pointer" href="javascript:void(0)">
    <i class="fas fa-box-open text-base"></i>
    Pedidos
   </a>
   <a id="nav-shopping" class="flex items-center gap-1 bg-gray-800 text-white font-bold rounded-full px-4 py-1 whitespace-nowrap shrink-0 cursor-pointer">
    <i class="fas fa-shopping-bag text-base"></i>
    Shopping
   </a>
   <a class="flex items-center gap-1 bg-gray-800 text-white font-bold rounded-full px-4 py-1 whitespace-nowrap shrink-0" href="#">
    <i class="fab fa-whatsapp text-base"></i>
    Grupo
   </a>
   <a class="flex items-center gap-1 bg-gray-800 text-white font-bold rounded-full px-4 py-1 whitespace-nowrap shrink-0" href="#">
    <i class="fas fa-bullhorn text-base"></i>
    Notícias Fúria CG
   </a>
  </nav>
  <!-- Banner -->
  <section id="shopping-section" class="banner-section px-6">
   <img alt="Banner promocional com arte urbana e texto Fúria das Ruas em estilo grafite" class="w-full max-w-4xl mx-auto rounded-3xl object-cover banner-height" draggable="false" height="200" src="banner.jpg" width="1280" style="height: 200px; max-height: 200px;"/>
   <!-- Choose your shirt text -->
   <section class="choose-shirt px-6 text-center mt-6 mb-6">
    <h2 class="font-extrabold text-base select-none">
     Escolha sua Camiseta
    </h2>
   </section>
   <!-- Products -->
   <section id="products" class="max-w-5xl mx-auto overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200 px-4">
    <article class="bg-gradient-to-b from-gray-300 to-white rounded-3xl w-36 p-3 inline-block align-top">
     <img alt="Camiseta Fúria Adulto, camiseta preta com estampa urbana estilizada" class="rounded-2xl mb-2 object-contain" draggable="false" height="110" src="adulto.jpg" width="110"/>
     <h3 class="font-extrabold text-center select-none text-sm">
      Fúria Adulto
     </h3>
     <p class="text-center text-xs select-none mt-0.5">
      Escolha o Tamanho
     </p>
     <button class="mt-2 bg-gradient-to-r from-teal-600 to-green-400 text-white font-extrabold rounded-full px-3 py-1.5 text-xs select-none add-to-cart" data-name="Fúria Adulto" data-price="60" data-img="adulto.jpg" type="button" data-requires-size="adulto">
      R$60
      <span class="font-normal">
       Adicionar
      </span>
     </button>
    </article>
    <article class="bg-gradient-to-b from-gray-300 to-white rounded-3xl w-36 p-3 inline-block align-top">
     <img alt="Camiseta Fúria + Hubz, camiseta branca com estampa combinada de logos" class="rounded-2xl mb-2 object-contain" draggable="false" height="110" src="hubz.jpg" width="110"/>
     <h3 class="font-extrabold text-center select-none text-sm">
      Fúria + Hubz
     </h3>
     <p class="text-center text-xs select-none mt-0.5">
      T. Único G
     </p>
     <button class="mt-2 bg-gradient-to-r from-teal-600 to-green-400 text-white font-extrabold rounded-full px-3 py-1.5 text-xs select-none add-to-cart" data-name="Fúria + Hubz" data-price="40" data-img="hubz.jpg" type="button">
      R$40
      <span class="font-normal">
       Adicionar
      </span>
     </button>
    </article>
    <article class="bg-gradient-to-b from-gray-300 to-white rounded-3xl w-36 p-3 inline-block align-top">
     <img alt="Camiseta Fúria Infantil, camiseta colorida com estampa infantil divertida" class="rounded-2xl mb-2 object-contain" draggable="false" height="110" src="infantil.png" width="110"/>
     <h3 class="font-extrabold text-center select-none text-sm">
      Fúria Infantil
     </h3>
     <p class="text-center text-xs select-none mt-0.5">
      Escolha o Tamanho
     </p>
     <button class="mt-2 bg-gradient-to-r from-teal-600 to-green-400 text-white font-extrabold rounded-full px-3 py-1.5 text-xs select-none add-to-cart" data-name="Fúria Infantil" data-price="50" data-img="infantil.png" type="button" data-requires-size="infantil">
      R$50
      <span class="font-normal">
       Adicionar
      </span>
     </button>
    </article>
   </section>
  </section>

  <!-- Orders section -->
  <section id="orders-section" class="hidden">
   <h2 class="font-extrabold text-xl text-center mt-6 mb-4 select-none">Pedidos Realizados</h2>
   <div id="orders-list" aria-live="polite" aria-relevant="additions removals">
    <p class="text-center text-gray-500 select-none">Nenhum pedido realizado ainda.</p>
   </div>
  </section>

  <!-- Size selection modal -->
  <div id="size-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-60">
   <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4">
    <h3 id="size-modal-title" class="text-xl font-extrabold mb-4 text-center"></h3>
    <div id="size-options" class="grid grid-cols-3 gap-3 mb-6 max-h-64 overflow-y-auto"></div>
    <div class="flex justify-end gap-4">
     <button id="size-cancel" class="bg-gray-300 hover:bg-gray-400 rounded px-4 py-2 font-semibold">
      Cancelar
     </button>
     <button id="size-confirm" class="bg-blue-600 hover:bg-blue-700 text-white rounded px-4 py-2 font-extrabold disabled:opacity-50" disabled>
      Confirmar
     </button>
    </div>
   </div>
  </div>

  <!-- Checkout modal -->
  <div id="checkout-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-70">
   <div class="modal-content">
    <h3 class="modal-header">Finalize sua Compra</h3>
    <form id="checkout-form" class="flex flex-col gap-4">
     <label class="flex flex-col text-sm font-semibold">
      Nome do Cliente
      <input type="text" id="client-name" name="clientName" required class="border border-gray-300 rounded px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500"/>
     </label>
     <label class="flex flex-col text-sm font-semibold">
      Número de Telefone
      <input type="tel" id="client-phone" name="clientPhone" required pattern="^\d{8,15}$" placeholder="Somente números, ex: 67999999999" class="border border-gray-300 rounded px-3 py-2 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500"/>
     </label>
     <div class="flex justify-end gap-4">
      <button type="button" id="checkout-cancel" class="btn btn-secondary">Cancelar</button>
      <button type="submit" class="btn btn-primary">Enviar para WhatsApp</button>
     </div>
    </form>
   </div>
  </div>

  <!-- Footer cart -->
  <footer class="bg-[#0047B3] flex items-center justify-between px-6 py-2 text-white select-none hidden" id="footer-cart">
   <div class="flex items-center gap-2">
    <i class="fas fa-shopping-bag text-2xl"></i>
    <span class="font-bold text-base" id="cart-items-count">0 item</span>
   </div>
   <div class="font-extrabold text-base" id="cart-total-price">R$ 0,00</div>
   <div class="flex gap-2">
    <button class="bg-red-500 hover:bg-red-600 transition-colors rounded-full px-3 py-1 font-extrabold uppercase text-xs" id="clear-cart" type="button">
     Limpar
    </button>
    <button class="bg-red-500 hover:bg-red-600 transition-colors rounded-full px-3 py-1 font-extrabold uppercase text-xs" id="view-cart" type="button">
     Ver Carrinho
    </button>
   </div>
  </footer>

  <!-- Sidebar Cart -->
  <aside id="cart-sidebar" class="fixed top-0 right-0 h-full w-72 bg-white shadow-lg transform translate-x-full transition-transform duration-300 z-50 flex flex-col">
   <header class="flex items-center justify-between p-2 border-b border-gray-300">
    <h2 class="text-lg font-extrabold text-gray-900 select-none">Seu Carrinho</h2>
    <button aria-label="Fechar carrinho" id="close-cart" class="text-gray-700 hover:text-gray-900 focus:outline-none text-xl font-bold">&times;</button>
   </header>
   <div id="cart-items-container" class="flex-1 overflow-y-auto p-2 space-y-2">
    <p class="text-center text-gray-500 mt-4 select-none">Seu carrinho está vazio.</p>
   </div>
   <footer class="p-2 border-t border-gray-300">
    <div class="flex justify-between font-extrabold text-base mb-2">
     <span>Total:</span>
     <span id="sidebar-cart-total">R$ 0,00</span>
    </div>
    <button id="checkout-button" class="w-full bg-green-600 hover:bg-green-700 text-white font-extrabold py-1.5 rounded-lg select-none text-sm">
     Finalizar Compra
    </button>
   </footer>
  </aside>

  <div id="cart-overlay" class="fixed inset-0 bg-black bg-opacity-40 hidden z-40"></div>

  <!-- Add to Cart Splash -->
  <div id="add-to-cart-splash" role="alert" aria-live="assertive" aria-atomic="true">
    <i class="fas fa-check-circle"></i> Item adicionado ao carrinho!
  </div>

  <script>
   (() => {
    const adultSizes = [
      { label: 'PP', altura: 63, largura: 48 },
      { label: 'P', altura: 66, largura: 49 },
      { label: 'M', altura: 68, largura: 53 },
      { label: 'G', altura: 70, largura: 56 },
      { label: 'GG', altura: 74, largura: 60 },
      { label: 'XG', altura: 78, largura: 64 },
      { label: 'XGG', altura: 79, largura: 67 },
      { label: 'S1', altura: 81, largura: 76 },
    ];
    const infantSizes = [
      { label: '6M', idade: '6 meses', altura: '—', largura: '—' },
      { label: 'T1', idade: '1 ano', altura: 37, largura: 29 },
      { label: 'T2', idade: '2 anos', altura: 38, largura: 30 },
      { label: 'T4', idade: '4 anos', altura: 44, largura: 34 },
      { label: 'T6', idade: '6 anos', altura: 48, largura: 37 },
      { label: 'T8', idade: '8 anos', altura: 51, largura: 38 },
      { label: 'T10', idade: '10 anos', altura: 52, largura: 40 },
      { label: 'T12', idade: '12 anos', altura: 55, largura: 41 },
      { label: 'T14', idade: '14 anos', altura: 60, largura: 43 },
    ];

    const cart = {
      items: [],
      addItem(name, price, img, size) {
        this.items.push({ name, price, img, size });
        this.updateUI();
      },
      clear() {
        this.items = [];
        this.updateUI();
      },
      getTotal() {
        return this.items.reduce((sum, item) => sum + item.price, 0);
      },
      updateUI() {
        const count = this.items.length;
        const total = this.getTotal();
        const cartCountEl = document.getElementById('cart-count');
        const cartItemsCountEl = document.getElementById('cart-items-count');
        const cartTotalPriceEl = document.getElementById('cart-total-price');
        const footerCartEl = document.getElementById('footer-cart');

        if (count > 0) {
          cartCountEl.textContent = count;
          cartCountEl.classList.remove('hidden');
          footerCartEl.classList.remove('hidden');
        } else {
          cartCountEl.classList.add('hidden');
          footerCartEl.classList.add('hidden');
        }

        if (count > 0) {
          cartItemsCountEl.textContent = count + (count === 1 ? ' item' : ' items');
          cartTotalPriceEl.textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
        } else {
          cartItemsCountEl.textContent = '0 item';
          cartTotalPriceEl.textContent = 'R$ 0,00';
        }

        const container = document.getElementById('cart-items-container');
        container.innerHTML = '';
        if (count === 0) {
          const emptyMsg = document.createElement('p');
          emptyMsg.textContent = 'Seu carrinho está vazio.';
          emptyMsg.className = 'text-center text-gray-500 mt-4 select-none';
          container.appendChild(emptyMsg);
        } else {
          this.items.forEach((item) => {
            const itemDiv = document.createElement('div');
            itemDiv.className = 'flex justify-between items-center border-b border-gray-200 pb-1 gap-2';
            itemDiv.innerHTML = `
              <img src="${item.img}" alt="Imagem do produto ${item.name}" class="w-12 h-12 object-contain rounded-lg flex-shrink-0" />
              <div class="flex-1 font-semibold text-gray-900 select-none text-sm">${item.name}${item.size ? ' - Tamanho: ' + item.size : ''}</div>
              <div class="text-gray-700 select-none text-sm">R$ ${item.price.toFixed(2).replace('.', ',')}</div>
            `;
            container.appendChild(itemDiv);
          });
        }
        document.getElementById('sidebar-cart-total').textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
      }
    };

    // Modal elements
    const sizeModal = document.getElementById('size-modal');
    const sizeModalTitle = document.getElementById('size-modal-title');
    const sizeOptionsContainer = document.getElementById('size-options');
    const sizeCancelBtn = document.getElementById('size-cancel');
    const sizeConfirmBtn = document.getElementById('size-confirm');

    const checkoutModal = document.getElementById('checkout-modal');
    const checkoutForm = document.getElementById('checkout-form');
    const clientNameInput = document.getElementById('client-name');
    const clientPhoneInput = document.getElementById('client-phone');
    const checkoutCancelBtn = document.getElementById('checkout-cancel');

    const navPedidos = document.getElementById('nav-pedidos');
    const navShopping = document.getElementById('nav-shopping');
    const ordersSection = document.getElementById('orders-section');
    const shoppingSection = document.getElementById('shopping-section');
    const ordersList = document.getElementById('orders-list');

    let selectedSize = null;
    let pendingAdd = null; // {name, price, img, type}

    // Utility: Save orders to cookie (JSON string)
    function saveOrdersToCookie(orders) {
      const json = JSON.stringify(orders);
      const expires = new Date();
      expires.setFullYear(expires.getFullYear() + 1);
      document.cookie = `furia_orders=${encodeURIComponent(json)}; expires=${expires.toUTCString()}; path=/; SameSite=Lax`;
    }

    // Utility: Load orders from cookie
    function loadOrdersFromCookie() {
      const cookies = document.cookie.split(';').map(c => c.trim());
      for (const c of cookies) {
        if (c.startsWith('furia_orders=')) {
          try {
            return JSON.parse(decodeURIComponent(c.substring('furia_orders='.length)));
          } catch {
            return [];
          }
        }
      }
      return [];
    }

    // Render orders list in the Pedidos section
    function renderOrders() {
      const orders = loadOrdersFromCookie();
      ordersList.innerHTML = '';
      if (orders.length === 0) {
        const p = document.createElement('p');
        p.className = 'text-center text-gray-500 select-none';
        p.textContent = 'Nenhum pedido realizado ainda.';
        ordersList.appendChild(p);
        return;
      }
      orders.forEach(order => {
        const div = document.createElement('div');
        div.className = 'order-item';
        const date = new Date(order.date);
        const dateStr = date.toLocaleString('pt-BR', { dateStyle: 'short', timeStyle: 'short' });
        const productsHtml = order.items.map((item, i) => {
          return `${i+1}. ${item.name}${item.size ? ' - Tamanho: ' + item.size : ''} - R$ ${item.price.toFixed(2).replace('.', ',')}`;
        }).join('<br>');
        div.innerHTML = `
          <div class="order-header">Pedido de ${order.clientName}</div>
          <div class="order-date">${dateStr}</div>
          <div class="order-products">${productsHtml}</div>
          <div class="order-total">Total: R$ ${order.total.toFixed(2).replace('.', ',')}</div>
        `;
        ordersList.appendChild(div);
      });
    }

    function openSizeModal(type, name) {
      selectedSize = null;
      sizeConfirmBtn.disabled = true;
      sizeOptionsContainer.innerHTML = '';
      sizeModalTitle.textContent = `Escolha o tamanho para ${name}`;

      let sizes = [];
      if (type === 'adulto') {
        sizes = adultSizes.map(s => ({
          label: s.label,
          description: `Altura: ${s.altura}cm, Largura: ${s.largura}cm`
        }));
      } else if (type === 'infantil') {
        sizes = infantSizes.map(s => ({
          label: s.label,
          description: s.altura === '—' ? `Idade aprox.: ${s.idade}` : `Idade aprox.: ${s.idade}, Altura: ${s.altura}cm, Largura: ${s.largura}cm`
        }));
      }

      sizes.forEach(size => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'size-option';
        btn.textContent = `${size.label} (${size.description})`;
        btn.addEventListener('click', () => {
          selectedSize = size.label;
          Array.from(sizeOptionsContainer.children).forEach(c => c.classList.remove('selected'));
          btn.classList.add('selected');
          sizeConfirmBtn.disabled = false;
        });
        sizeOptionsContainer.appendChild(btn);
      });

      sizeModal.classList.remove('hidden');
    }

    sizeCancelBtn.addEventListener('click', () => {
      sizeModal.classList.add('hidden');
      pendingAdd = null;
    });

    sizeConfirmBtn.addEventListener('click', () => {
      if (!selectedSize || !pendingAdd) return;
      cart.addItem(pendingAdd.name, pendingAdd.price, pendingAdd.img, selectedSize);
      showAddToCartSplash();
      sizeModal.classList.add('hidden');
      pendingAdd = null;
    });

    // Add to cart buttons
    document.querySelectorAll('.add-to-cart').forEach(button => {
      button.addEventListener('click', () => {
        const name = button.getAttribute('data-name');
        const price = parseFloat(button.getAttribute('data-price'));
        const img = button.getAttribute('data-img') || '';
        const requiresSize = button.getAttribute('data-requires-size');

        if (requiresSize === 'adulto' || requiresSize === 'infantil') {
          pendingAdd = { name, price, img, type: requiresSize };
          openSizeModal(requiresSize, name);
        } else {
          cart.addItem(name, price, img);
          showAddToCartSplash();
        }
      });
    });

    // Clear cart button
    document.getElementById('clear-cart').addEventListener('click', () => {
      cart.clear();
      closeCartSidebar();
      // Clear footer cart preview items and total
      const cartItemsCountEl = document.getElementById('cart-items-count');
      const cartTotalPriceEl = document.getElementById('cart-total-price');
      cartItemsCountEl.textContent = '0 item';
      cartTotalPriceEl.textContent = 'R$ 0,00';
    });

    // View cart button opens sidebar
    document.getElementById('view-cart').addEventListener('click', () => {
      openCartSidebar();
    });

    // Cart button in header opens sidebar
    document.getElementById('cart-button').addEventListener('click', () => {
      openCartSidebar();
    });

    // Close sidebar button
    document.getElementById('close-cart').addEventListener('click', () => {
      closeCartSidebar();
    });

    // Overlay click closes sidebar
    document.getElementById('cart-overlay').addEventListener('click', () => {
      closeCartSidebar();
    });

    // Checkout modal handlers
    document.getElementById('checkout-button').addEventListener('click', () => {
      if (cart.items.length === 0) {
        alert('Seu carrinho está vazio.');
        return;
      }
      clientNameInput.value = '';
      clientPhoneInput.value = '';
      checkoutModal.classList.remove('hidden');
    });

    checkoutCancelBtn.addEventListener('click', () => {
      checkoutModal.classList.add('hidden');
    });

    checkoutForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = clientNameInput.value.trim();
      const phone = clientPhoneInput.value.trim();
      if (!name || !phone) {
        alert('Por favor, preencha nome e telefone corretamente.');
        return;
      }
      // Prepare WhatsApp message with client info and order
      let message = `*Pedido Fúria das Ruas*%0A%0A*Cliente:* ${encodeURIComponent(name)}%0A*Telefone:* ${encodeURIComponent(phone)}%0A%0A`;
      cart.items.forEach((item, index) => {
        message += `*${index + 1}. ${item.name}*${item.size ? ' - Tamanho: ' + item.size : ''}%0APreço: R$ ${item.price.toFixed(2).replace('.', ',')}%0A%0A`;
      });
      message += `*Total:* R$ ${cart.getTotal().toFixed(2).replace('.', ',')}`;
      const phoneNumber = '5567999321890';
      const url = `https://wa.me/${phoneNumber}?text=${message}`;

      // Save order to cookie
      const orders = loadOrdersFromCookie();
      const newOrder = {
        clientName: name,
        clientPhone: phone,
        items: cart.items.map(i => ({ name: i.name, price: i.price, size: i.size || null })),
        total: cart.getTotal(),
        date: new Date().toISOString()
      };
      orders.unshift(newOrder); // newest first
      saveOrdersToCookie(orders);
      renderOrders();

      window.open(url, '_blank');
      checkoutModal.classList.add('hidden');
      cart.clear();
      closeCartSidebar();
      showSection('shopping');
    });

    function openCartSidebar() {
      document.getElementById('cart-sidebar').classList.remove('translate-x-full');
      document.getElementById('cart-overlay').classList.remove('hidden');
      document.getElementById('footer-cart').style.zIndex = '30';
      document.getElementById('footer-cart').style.pointerEvents = 'none';
    }
    function closeCartSidebar() {
      document.getElementById('cart-sidebar').classList.add('translate-x-full');
      document.getElementById('cart-overlay').classList.add('hidden');
      document.getElementById('footer-cart').style.zIndex = '40';
      document.getElementById('footer-cart').style.pointerEvents = 'auto';
    }

    // Navigation between Pedidos and Shopping sections
    function showSection(section) {
      if (section === 'pedidos') {
        ordersSection.classList.remove('hidden');
        shoppingSection.classList.add('hidden');
        navPedidos.classList.add('bg-gray-900');
        navPedidos.classList.remove('bg-gray-800');
        navShopping.classList.remove('bg-gray-900');
        navShopping.classList.add('bg-gray-800');
      } else {
        shoppingSection.classList.remove('hidden');
        ordersSection.classList.add('hidden');
        navShopping.classList.add('bg-gray-900');
        navShopping.classList.remove('bg-gray-800');
        navPedidos.classList.remove('bg-gray-900');
        navPedidos.classList.add('bg-gray-800');
      }
    }

    navPedidos.addEventListener('click', () => {
      renderOrders();
      showSection('pedidos');
    });
    navShopping.addEventListener('click', () => {
      showSection('shopping');
    });

    // Splash animation for add to cart
    const splash = document.getElementById('add-to-cart-splash');
    let splashTimeout = null;
    function showAddToCartSplash() {
      if (splashTimeout) {
        clearTimeout(splashTimeout);
      }
      splash.classList.add('show');
      splashTimeout = setTimeout(() => {
        splash.classList.remove('show');
      }, 500);
    }

    // On load, show shopping section and render orders
    document.addEventListener('DOMContentLoaded', () => {
      showSection('shopping');
      renderOrders();
    });
   })();
  </script>
 </body>
</html>
